# History
Contents based on bdr's [scratch.m](scratch.m) which trained a
neural network to detect glassbreak using two frequency
envelopes and the zero crossing rate. This was split into two channels, one to detect a Thud and the second to detect Shatter.

# Entry point
The latest entry point with this version:
[testOptimalParameters.m](testOptimalParameters.m) which can set some parameters such as attack
and decay rates programmatically. It can also set the neural network chain and the audio file which
is processed. It calls [glassBreakRampDevWithParameters_v3.m](glassBreakRampDevWithParameters_v3.m)
The suffix _v3 refers to the timing method used to suppress false positives.

An earlier entry point which still works is [glassBreakRampDevFunctionalForm.m](glassBreakRampDevFunctionalForm.m)
or [glassBreakRampDevFunctionalForm_FromJupyterLab.m](glassBreakRampDevFunctionalForm_FromJupyterLab.m)

glassBreakRampDevFunctionalForm_FromJupyterLab was generated by uploading glassBreakRampDevFunctionalForm to JupyterLab and editing the code
until it functioned in the Octave/JupyterLab environment where saving mat-files (which can be large) and
fig-files (which can use only non-zoomable formats such as pdf and png) are prohibitive. 

# Training Data
Any labeled wav file with a mix of glass breaks, background, and confusing sounds.

# Processing
Neural networks are trained and then evaluated. NN outputs are thresholded and relative timing between pulses is determined.
Neural networks can be saved as mat-files for processing new signal streams or regenerated.

# Timing
Timing constraints are enforced through rules that constrain the onset of Shatter to occur shortly after detecting a thud.

# Work in Progress
1) Whether to subtract one neural network output from the other to suppress the false positive rate. May be appropriate since the neural networks are trained independently.

2) Determine whether the duration of the sound of shatter is sufficient and whether it can be used to suppress False Positives. 

# Implementations
Code has been tested in Matlab, Octave, and Octave running in JupyterLab.

# TODO
The code should check whether it is being run in Matlab or Octave to decide how to handle mat-files and fig-files.
 
